fix bug simply put all the vars inside handleeresponse check if not needed outside function
